# rabbitMQ 原理

## 簡介
RabbitMQ 是一个开源的消息队列中间件，基于高级消息队列协议（AMQP）构建。

## 名詞解釋

+ 消息（Message）：消息是 RabbitMQ 中传递的数据单元，可以是文本、JSON、XML 等任意格式的数据。

+ 队列（Queue）：队列是消息的存储容器，消息生产者将消息发送到队列，消费者从队列中读取和处理消息。队列可以持久化，以确保消息不会丢失。

+ 交换器（Exchange）：交换器负责接收消息并将其路由到一个或多个队列。常见的交换器类型有直接（direct）、主题（topic）、头（headers）和扇出（fanout）。

+ 绑定（Binding）：绑定是交换器和队列之间的连接，定义了消息的路由规则。通过绑定，消息可以根据路由键被定向到特定的队列。

+ 消费者（Consumer）：消费者是从队列中接收和处理消息的应用程序或组件。消费者可以使用轮询（polling）或推送（push）方式接收消息。

+ 生产者（Producer）：生产者是发送消息到交换器的应用程序或组件。生产者将消息发布到交换器，由交换器根据绑定规则将消息路由到队列。

## 交换器

+ Direct Exchange（直连交换器）：直连交换器根据消息的路由键（routing key）精确匹配队列的绑定键（binding key）来路由消息。示例：如果消息的路由键是 "info"，则消息会被路由到绑定键也是 "info" 的队列。

+ Topic Exchange（主题交换器）：主题交换器根据消息的路由键模式（使用通配符）匹配队列的绑定键。通配符 “#” 代表一个或多个词， “*” 代表一个词。
示例：如果队列绑定键是 "user.*"，则路由键是 "user.info" 和 "user.error" 的消息都会被路由到该队列；而绑定键 "user.#" 则会匹配 "user.info.error" 等多个词的路由键。

+ Fanout Exchange（扇出交换器）：扇出交换器会将消息广播到所有与之绑定的队列，而不管路由键是什么。示例：所有绑定到该交换器的队列都会收到消息，适用于需要将消息广播到多个消费者的场景。

+ Headers Exchange（头交换器）：头交换器根据消息头属性（header attributes）来路由消息，而不是路由键。它允许更复杂的匹配规则。示例：消息只有在消息头属性与队列的绑定规则完全匹配时才会被路由到相应队列。