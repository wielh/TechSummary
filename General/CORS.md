# CORS 相關問題

## 簡介

跨域问题（Cross-Origin Resource Sharing，CORS）是指在浏览器中运行的前端代码（例如 JavaScript）试图从不同的源（域、协议或端口）加载资源时遇到的安全限制。当网页试图通过 AJAX 请求来自不同源的资源时，浏览器会执行同源策略（Same-Origin Policy），限制跨源请求。
同源策略的主要目的是防止恶意网站获取用户的敏感信息，保护用户隐私和安全。但在一些情况下，合法的跨域请求是必要的，例如前端应用需要与后端 API 进行通信，而 API 位于不同的域名下。跨域问题通常表现为浏览器在控制台中报错，拦截跨域请求，导致请求失败或部分内容无法正常加载。

## 解決方法

+ 在后端服务器上设置 CORS 头部： 后端服务器可以在响应中添加 CORS 头部来允许跨域请求。最常见的 CORS 头部是 Access-Control-Allow-Origin，它指定了允许访问资源的域名。您可以将其设置为特定的域名或通配符 * 表示允许所有域名访问。例如，在 Express.js 中，您可以使用 cors 中间件来方便地处理 CORS：

+ CORS 中间件： 在一些 Web 框架中，提供了可以用于处理 CORS 的中间件。您可以在应用中添加这些中间件来处理跨域请求。例如，Express 框架中的 cors 中间件。

+ 使用代理服务器： 在同源服务器上部署一个代理服务器，用于转发跨域请求。前端代码发送请求给代理服务器，代理服务器再将请求发送给目标服务器，并将响应返回给前端。这样，前端请求的是同源服务器上的资源，避免了跨域问题。

+ JSONP（仅限 GET 请求）： 如果您的接口支持 JSONP，您可以使用 JSONP 来解决跨域问题。JSONP 利用 script 标签不受同源策略限制的特性，通过动态创建 script 标签来加载跨域资源。但 JSONP 只支持 GET 请求，且存在安全风险，需要谨慎使用。
